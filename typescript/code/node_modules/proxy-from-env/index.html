<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>proxy-from-env | 花果山集训营</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.76d4d0b8.css" as="style"><link rel="preload" href="/assets/js/app.4d61b4ed.js" as="script"><link rel="preload" href="/assets/js/2.ccf48b6a.js" as="script"><link rel="preload" href="/assets/js/1.87595a30.js" as="script"><link rel="preload" href="/assets/js/57.394f4f2a.js" as="script"><link rel="prefetch" href="/assets/js/10.f3b75cb1.js"><link rel="prefetch" href="/assets/js/11.982c24c9.js"><link rel="prefetch" href="/assets/js/12.c204bb4e.js"><link rel="prefetch" href="/assets/js/13.1d9a44a6.js"><link rel="prefetch" href="/assets/js/14.42991e2a.js"><link rel="prefetch" href="/assets/js/15.c6f8ea5e.js"><link rel="prefetch" href="/assets/js/16.e37df2a1.js"><link rel="prefetch" href="/assets/js/17.1678b209.js"><link rel="prefetch" href="/assets/js/18.87da4873.js"><link rel="prefetch" href="/assets/js/19.0741f0b9.js"><link rel="prefetch" href="/assets/js/20.9f94b747.js"><link rel="prefetch" href="/assets/js/21.60375cff.js"><link rel="prefetch" href="/assets/js/22.816a248f.js"><link rel="prefetch" href="/assets/js/23.fd9c7d60.js"><link rel="prefetch" href="/assets/js/24.f4db7c67.js"><link rel="prefetch" href="/assets/js/25.397ad542.js"><link rel="prefetch" href="/assets/js/26.aba96072.js"><link rel="prefetch" href="/assets/js/27.4a60aa0c.js"><link rel="prefetch" href="/assets/js/28.981aa08c.js"><link rel="prefetch" href="/assets/js/29.bb9ec8cd.js"><link rel="prefetch" href="/assets/js/3.e8eb28a6.js"><link rel="prefetch" href="/assets/js/30.e8e40c94.js"><link rel="prefetch" href="/assets/js/31.51477b59.js"><link rel="prefetch" href="/assets/js/32.33aa7a92.js"><link rel="prefetch" href="/assets/js/33.2749e82c.js"><link rel="prefetch" href="/assets/js/34.04310742.js"><link rel="prefetch" href="/assets/js/35.73488809.js"><link rel="prefetch" href="/assets/js/36.6b01297b.js"><link rel="prefetch" href="/assets/js/37.25a20674.js"><link rel="prefetch" href="/assets/js/38.554f3523.js"><link rel="prefetch" href="/assets/js/39.425253d3.js"><link rel="prefetch" href="/assets/js/4.b1e1d938.js"><link rel="prefetch" href="/assets/js/40.cdfd68e7.js"><link rel="prefetch" href="/assets/js/41.e2dc2a7f.js"><link rel="prefetch" href="/assets/js/42.7cbb9be7.js"><link rel="prefetch" href="/assets/js/43.963cab85.js"><link rel="prefetch" href="/assets/js/44.7766a3ab.js"><link rel="prefetch" href="/assets/js/45.dd9c536c.js"><link rel="prefetch" href="/assets/js/46.ae328ccd.js"><link rel="prefetch" href="/assets/js/47.f3cdb83d.js"><link rel="prefetch" href="/assets/js/48.cb73360c.js"><link rel="prefetch" href="/assets/js/49.f306b71f.js"><link rel="prefetch" href="/assets/js/5.0f3a7393.js"><link rel="prefetch" href="/assets/js/50.697aa0ca.js"><link rel="prefetch" href="/assets/js/51.84f1bcf0.js"><link rel="prefetch" href="/assets/js/52.c1bb21a1.js"><link rel="prefetch" href="/assets/js/53.180ff648.js"><link rel="prefetch" href="/assets/js/54.8aea5ad9.js"><link rel="prefetch" href="/assets/js/55.a9decfd4.js"><link rel="prefetch" href="/assets/js/56.9d2a383d.js"><link rel="prefetch" href="/assets/js/58.b9572eb1.js"><link rel="prefetch" href="/assets/js/59.b7f1d30a.js"><link rel="prefetch" href="/assets/js/6.7ed6386f.js"><link rel="prefetch" href="/assets/js/60.925893aa.js"><link rel="prefetch" href="/assets/js/61.29812e51.js"><link rel="prefetch" href="/assets/js/62.ceb6e30a.js"><link rel="prefetch" href="/assets/js/63.11ccc58f.js"><link rel="prefetch" href="/assets/js/7.94af19b6.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.cf079a49.js">
    <link rel="stylesheet" href="/assets/css/0.styles.76d4d0b8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpeg" alt="花果山集训营" class="logo"> <span class="site-name can-hide">花果山集训营</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javascript" class="dropdown-title"><span class="title">Javascript</span> <span class="arrow down"></span></button> <button type="button" aria-label="Javascript" class="mobile-dropdown-title"><span class="title">Javascript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/javascript/es6/interator/" class="nav-link">
  Interator
</a></li><li class="dropdown-subitem"><a href="/javascript/es6/generator/" class="nav-link">
  Generator
</a></li><li class="dropdown-subitem"><a href="/javascript/es6/async/" class="nav-link">
  Async
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器原理及性能优化
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue2/" class="nav-link">
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/vue/vue3/" class="nav-link">
  Vue3
</a></li></ul></div></div><div class="nav-item"><a href="/typescript/" class="nav-link router-link-active">
  TypeScript
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/前端工程化/webpack/" class="nav-link">
  Webpack
</a></div><div class="nav-item"><a href="/cicd/" class="nav-link">
  CI/CD
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javascript" class="dropdown-title"><span class="title">Javascript</span> <span class="arrow down"></span></button> <button type="button" aria-label="Javascript" class="mobile-dropdown-title"><span class="title">Javascript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/javascript/es6/interator/" class="nav-link">
  Interator
</a></li><li class="dropdown-subitem"><a href="/javascript/es6/generator/" class="nav-link">
  Generator
</a></li><li class="dropdown-subitem"><a href="/javascript/es6/async/" class="nav-link">
  Async
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器原理及性能优化
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue2/" class="nav-link">
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/vue/vue3/" class="nav-link">
  Vue3
</a></li></ul></div></div><div class="nav-item"><a href="/typescript/" class="nav-link router-link-active">
  TypeScript
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/前端工程化/webpack/" class="nav-link">
  Webpack
</a></div><div class="nav-item"><a href="/cicd/" class="nav-link">
  CI/CD
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/typescript/" aria-current="page" class="sidebar-link">TypeScript 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/typescript/#类型注解" class="sidebar-link">类型注解</a></li><li class="sidebar-sub-header"><a href="/typescript/#typescript-常用类型" class="sidebar-link">Typescript 常用类型</a></li><li class="sidebar-sub-header"><a href="/typescript/#js-已有类型" class="sidebar-link">JS 已有类型</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts-新增类型" class="sidebar-link">TS 新增类型</a></li><li class="sidebar-sub-header"><a href="/typescript/#类型推导" class="sidebar-link">类型推导</a></li><li class="sidebar-sub-header"><a href="/typescript/#类型断言" class="sidebar-link">类型断言</a></li><li class="sidebar-sub-header"><a href="/typescript/#字面量类型" class="sidebar-link">字面量类型</a></li><li class="sidebar-sub-header"><a href="/typescript/#枚举类型" class="sidebar-link">枚举类型</a></li><li class="sidebar-sub-header"><a href="/typescript/#any-类型" class="sidebar-link">any 类型</a></li><li class="sidebar-sub-header"><a href="/typescript/#typeof运算符" class="sidebar-link">typeof运算符</a></li></ul></li><li><a href="/typescript/tsAdvanced.html" class="sidebar-link">Typescript 进阶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#class-类" class="sidebar-link">class 类</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#实例属性初始化" class="sidebar-link">实例属性初始化</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#构造函数" class="sidebar-link">构造函数</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#实例方法" class="sidebar-link">实例方法</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#类的继承" class="sidebar-link">类的继承</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#implements-继承" class="sidebar-link">implements 继承</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#class-类的可见修饰符" class="sidebar-link">class 类的可见修饰符</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#ts-类型兼容性说明" class="sidebar-link">TS 类型兼容性说明</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#交叉类型" class="sidebar-link">交叉类型</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#交叉类型和接口之间的对比" class="sidebar-link">交叉类型和接口之间的对比</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#泛型" class="sidebar-link">泛型</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#简化泛型函数的调用" class="sidebar-link">简化泛型函数的调用</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#泛型约束" class="sidebar-link">泛型约束</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#多个泛型变量的情况" class="sidebar-link">多个泛型变量的情况</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#泛型接口" class="sidebar-link">泛型接口</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#数组是泛型接口" class="sidebar-link">数组是泛型接口</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#泛型类" class="sidebar-link">泛型类</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#泛型工具类型-partial" class="sidebar-link">泛型工具类型 Partial</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#泛型工具类型-readonly" class="sidebar-link">泛型工具类型 Readonly</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#泛型工具类型-pick" class="sidebar-link">泛型工具类型 Pick</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#泛型工具类型-record" class="sidebar-link">泛型工具类型 Record</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#索引签名类型" class="sidebar-link">索引签名类型</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#映射类型" class="sidebar-link">映射类型</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#映射类型-keyof" class="sidebar-link">映射类型 keyof</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#分析-partial-的内部实现" class="sidebar-link">分析 Partial 的内部实现</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#索引查询类型-基本使用" class="sidebar-link">索引查询类型(基本使用)</a></li><li class="sidebar-sub-header"><a href="/typescript/tsAdvanced.html#索引查询类型-同时查询多个" class="sidebar-link">索引查询类型(同时查询多个)</a></li></ul></li><li><a href="/typescript/typeDeclarationFile.html" class="sidebar-link">类型声明文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/typescript/typeDeclarationFile.html#ts-中的两种文件类型" class="sidebar-link">TS 中的两种文件类型</a></li><li class="sidebar-sub-header"><a href="/typescript/typeDeclarationFile.html#类型声明文件的使用说明" class="sidebar-link">类型声明文件的使用说明</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="proxy-from-env"><a href="#proxy-from-env" class="header-anchor">#</a> proxy-from-env</h1> <p><a href="https://travis-ci.org/Rob--W/proxy-from-env" target="_blank" rel="noopener noreferrer"><img src="https://travis-ci.org/Rob--W/proxy-from-env.svg?branch=master" alt="Build Status"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://coveralls.io/github/Rob--W/proxy-from-env?branch=master" target="_blank" rel="noopener noreferrer"><img src="https://coveralls.io/repos/github/Rob--W/proxy-from-env/badge.svg?branch=master" alt="Coverage Status"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><code>proxy-from-env</code> is a Node.js package that exports a function (<code>getProxyForUrl</code>)
that takes an input URL (a string or
<a href="https://nodejs.org/docs/latest/api/url.html#url_url_parsing" target="_blank" rel="noopener noreferrer"><code>url.parse</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>'s
return value) and returns the desired proxy URL (also a string) based on
standard proxy environment variables. If no proxy is set, an empty string is
returned.</p> <p>It is your responsibility to actually proxy the request using the given URL.</p> <p>Installation:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> proxy-from-env
</code></pre></div><h2 id="example"><a href="#example" class="header-anchor">#</a> Example</h2> <p>This example shows how the data for a URL can be fetched via the
<a href="https://nodejs.org/api/http.html" target="_blank" rel="noopener noreferrer"><code>http</code> module<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, in a proxy-aware way.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> parseUrl <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>parse<span class="token punctuation">;</span>
<span class="token keyword">var</span> getProxyForUrl <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'proxy-from-env'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getProxyForUrl<span class="token punctuation">;</span>

<span class="token keyword">var</span> some_url <span class="token operator">=</span> <span class="token string">'http://example.com/something'</span><span class="token punctuation">;</span>

<span class="token comment">// // Example, if there is a proxy server at 10.0.0.1:1234, then setting the</span>
<span class="token comment">// // http_proxy environment variable causes the request to go through a proxy.</span>
<span class="token comment">// process.env.http_proxy = 'http://10.0.0.1:1234';</span>
<span class="token comment">// </span>
<span class="token comment">// // But if the host to be proxied is listed in NO_PROXY, then the request is</span>
<span class="token comment">// // not proxied (but a direct request is made).</span>
<span class="token comment">// process.env.no_proxy = 'example.com';</span>

<span class="token keyword">var</span> proxy_url <span class="token operator">=</span> <span class="token function">getProxyForUrl</span><span class="token punctuation">(</span>some_url<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &lt;-- Our magic.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>proxy_url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Should be proxied through proxy_url.</span>
  <span class="token keyword">var</span> parsed_some_url <span class="token operator">=</span> <span class="token function">parseUrl</span><span class="token punctuation">(</span>some_url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> parsed_proxy_url <span class="token operator">=</span> <span class="token function">parseUrl</span><span class="token punctuation">(</span>proxy_url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// A HTTP proxy is quite simple. It is similar to a normal request, except the</span>
  <span class="token comment">// path is an absolute URL, and the proxied URL's host is put in the header</span>
  <span class="token comment">// instead of the server's actual host.</span>
  httpOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">protocol</span><span class="token operator">:</span> parsed_proxy_url<span class="token punctuation">.</span>protocol<span class="token punctuation">,</span>
    <span class="token literal-property property">hostname</span><span class="token operator">:</span> parsed_proxy_url<span class="token punctuation">.</span>hostname<span class="token punctuation">,</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> parsed_proxy_url<span class="token punctuation">.</span>port<span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> parsed_some_url<span class="token punctuation">.</span>href<span class="token punctuation">,</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">Host</span><span class="token operator">:</span> parsed_some_url<span class="token punctuation">.</span>host<span class="token punctuation">,</span>  <span class="token comment">// = host name + optional port.</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// Direct request.</span>
  httpOptions <span class="token operator">=</span> some_url<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>httpOptions<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> responses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> responses<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>responses<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="environment-variables"><a href="#environment-variables" class="header-anchor">#</a> Environment variables</h2> <p>The environment variables can be specified in lowercase or uppercase, with the
lowercase name having precedence over the uppercase variant. A variable that is
not set has the same meaning as a variable that is set but has no value.</p> <h3 id="no-proxy"><a href="#no-proxy" class="header-anchor">#</a> NO_PROXY</h3> <p><code>NO_PROXY</code> is a list of host names (optionally with a port). If the input URL
matches any of the entries in <code>NO_PROXY</code>, then the input URL should be fetched
by a direct request (i.e. without a proxy).</p> <p>Matching follows the following rules:</p> <ul><li><code>NO_PROXY=*</code> disables all proxies.</li> <li>Space and commas may be used to separate the entries in the <code>NO_PROXY</code> list.</li> <li>If <code>NO_PROXY</code> does not contain any entries, then proxies are never disabled.</li> <li>If a port is added after the host name, then the ports must match. If the URL
does not have an explicit port name, the protocol's default port is used.</li> <li>Generally, the proxy is only disabled if the host name is an exact match for
an entry in the <code>NO_PROXY</code> list. The only exceptions are entries that start
with a dot or with a wildcard; then the proxy is disabled if the host name
ends with the entry.</li></ul> <p>See <code>test.js</code> for examples of what should match and what does not.</p> <h3 id="proxy"><a href="#proxy" class="header-anchor">#</a> *_PROXY</h3> <p>The environment variable used for the proxy depends on the protocol of the URL.
For example, <code>https://example.com</code> uses the &quot;https&quot; protocol, and therefore the
proxy to be used is <code>HTTPS_PROXY</code> (<em>NOT</em> <code>HTTP_PROXY</code>, which is <em>only</em> used for
http:-URLs).</p> <p>The library is not limited to http(s), other schemes such as
<code>FTP_PROXY</code> (ftp:),
<code>WSS_PROXY</code> (wss:),
<code>WS_PROXY</code> (ws:)
are also supported.</p> <p>If present, <code>ALL_PROXY</code> is used as fallback if there is no other match.</p> <h2 id="external-resources"><a href="#external-resources" class="header-anchor">#</a> External resources</h2> <p>The exact way of parsing the environment variables is not codified in any
standard. This library is designed to be compatible with formats as expected by
existing software.
The following resources were used to determine the desired behavior:</p> <ul><li><p>cURL:
https://curl.haxx.se/docs/manpage.html#ENVIRONMENT<br>
https://github.com/curl/curl/blob/4af40b3646d3b09f68e419f7ca866ff395d1f897/lib/url.c#L4446-L4514<br>
https://github.com/curl/curl/blob/4af40b3646d3b09f68e419f7ca866ff395d1f897/lib/url.c#L4608-L4638</p></li> <li><p>wget:
https://www.gnu.org/software/wget/manual/wget.html#Proxies<br>
http://git.savannah.gnu.org/cgit/wget.git/tree/src/init.c?id=636a5f9a1c508aa39e35a3a8e9e54520a284d93d#n383<br>
http://git.savannah.gnu.org/cgit/wget.git/tree/src/retr.c?id=93c1517c4071c4288ba5a4b038e7634e4c6b5482#n1278</p></li> <li><p>W3:
https://www.w3.org/Daemon/User/Proxies/ProxyClients.html</p></li> <li><p>Python's urllib:
https://github.com/python/cpython/blob/936135bb97fe04223aa30ca6e98eac8f3ed6b349/Lib/urllib/request.py#L755-L782<br>
https://github.com/python/cpython/blob/936135bb97fe04223aa30ca6e98eac8f3ed6b349/Lib/urllib/request.py#L2444-L2479</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.4d61b4ed.js" defer></script><script src="/assets/js/2.ccf48b6a.js" defer></script><script src="/assets/js/1.87595a30.js" defer></script><script src="/assets/js/57.394f4f2a.js" defer></script>
  </body>
</html>
